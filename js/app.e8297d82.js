(function(){"use strict";var t={9021:function(t,e,o){var s=o(9963),n=o(6252);const r={class:"container"},i={class:"floors-container"};function l(t,e,o,s,l,u){const a=(0,n.up)("floorsColumn"),c=(0,n.up)("floorsButtons");return(0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("div",i,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.mineCount,(t=>((0,n.wg)(),(0,n.j4)(a,{key:t,floorsQuentity:l.floorsQuentity},null,8,["floorsQuentity"])))),128)),(0,n.Wm)(c,{floorsQuentity:l.floorsQuentity,onFloorClick:u.floorClick},null,8,["floorsQuentity","onFloorClick"])])])}o(7658);var u=o(3577);const a={class:"floors-buttons"},c=["onClick"],v=(0,n._)("div",{class:"in-button-color"},null,-1),f=(0,n._)("div",{class:"in-button-border"},null,-1);function h(t,e,o,s,r,i){return(0,n.wg)(),(0,n.iD)("div",a,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.floorsQuentity,(e=>((0,n.wg)(),(0,n.iD)("div",{key:e,class:"floor-buttons__item"},[(0,n._)("button",{class:"floors-button",onClick:o=>t.$emit("floorClick",e)},[v,f,(0,n.Uk)(" "+(0,u.zw)(e),1)],8,c)])))),128))])}var m={props:{floorsQuentity:{default:!0}}},d=o(3744);const p=(0,d.Z)(m,[["render",h]]);var L=p,y=o.p+"img/arrow-down.64ee1c92.svg";const w={class:"floors-column"},b=(0,n._)("div",{class:"elevator"},[(0,n._)("div",{class:"arrow"},[(0,n._)("img",{src:y,alt:"arrow"})]),(0,n._)("div",{class:"floor-number"})],-1);function g(t,e,o,s,r,i){return(0,n.wg)(),(0,n.iD)("div",w,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.floorsQuentity,(t=>((0,n.wg)(),(0,n.iD)("div",{class:"floors-column__item",key:t})))),128)),b])}var E={props:{floorsQuentity:{default:!0}}};const k=(0,d.Z)(E,[["render",g]]);var C=k,O={components:{floorsButtons:L,floorsColumn:C},data(){return{mineCount:3,floorsQuentity:8,minesUserEventList:{},elevatorStatus:[],notFree:-1,userEventList:[]}},mounted(){for(let t=0;t<this.mineCount;t++)this.elevatorStatus.push(!1),this.minesUserEventList[`${t}`]={},this.minesUserEventList[`${t}`]["eventList"]=[],this.minesUserEventList[`${t}`]["translateY"]=0,this.minesUserEventList[`${t}`]["floorNumberNow"]=1},methods:{floorClick(t){this.userEventList.push(t);let e=this.elevatorStatus.indexOf(!1);-1===e&&(this.notFree===this.mineCount-1?(this.notFree=0,e=this.notFree):(this.notFree+=1,e=this.notFree)),this.minesUserEventList[e].eventList.push(t);const o=this.userEventList[this.userEventList.length-1],s=document.querySelectorAll(".in-button-color");if(this.userEventList.length>1){let t=this.messageElevatorOnFloor(e,s,o);if("stop"===t)return;let n=this.userEventList.filter((t=>t===o));if(n.length>1)return console.log("Лифт уже имеет в очереди этот этаж: ",n),this.userEventList.pop(),void this.minesUserEventList[e].eventList.pop()}else{let t=this.messageElevatorOnFloor(e,s,o);if("stop"===t)return}!0!==this.elevatorStatus[e]&&(this.elevatorStatus[e]=!0,this.translateElevator(e,this.minesUserEventList[e].floorNumberNow))},translateElevator(t,e){let o=setInterval((()=>{const s=document.querySelectorAll(".elevator")[t],n=document.querySelectorAll(".arrow")[t],r=document.querySelectorAll(".floor-number")[t],i=this.minesUserEventList[t];n.classList.add("arrow-show"),"top"===this.checkDirection(e,t)&&(s.style.transform=`translateY(${i.translateY-=100}px)`,n.style.transform="rotate(180deg)",r.textContent=`${i.eventList[0]}`),"down"===this.checkDirection(e,t)&&(s.style.transform=`translateY(${i.translateY+=100}px)`,n.style.transform="rotate(0deg)",r.textContent=`${i.eventList[0]}`),i.translateY===-100*(i.eventList[0]-1)&&(setTimeout((()=>{n.classList.remove("arrow-show"),s.classList.add("elevator-animate")}),1e3),clearInterval(o),setTimeout((()=>{const e=document.querySelectorAll(".in-button-color");e[i.eventList[0]-1].style.borderColor="transparent",s.classList.remove("elevator-animate"),i.floorNumberNow=i.eventList[0],i.eventList.shift(),this.userEventList.shift(),i.eventList[0]&&this.translateElevator(t,i.floorNumberNow),i.eventList[0]||(this.elevatorStatus[t]=!1,console.log(`Лифт №${t+1} END`))}),4e3))}),1e3)},checkDirection(t,e){return t>this.minesUserEventList[e].eventList[0]?"down":this.minesUserEventList[e].eventList[0]>t?"top":void 0},messageElevatorOnFloor(t,e,o){e[o-1].style.borderColor="red";let s=Object.keys(this.minesUserEventList).length,n=[];for(let i=0;i<s;i++)n.push(this.minesUserEventList[i].floorNumberNow);let r=0;if(n.forEach(((t,e)=>{t!==o||(r=e)})),n.includes(o)&&!this.elevatorStatus[r])return console.log("Вы уже на этом этаже"),e[o-1].style.borderColor="transparent",this.userEventList.pop(),this.minesUserEventList[t].eventList.pop(),"stop"}}};const U=(0,d.Z)(O,[["render",l]]);var D=U;const F=(0,s.ri)(D);F.mount("#app")}},e={};function o(s){var n=e[s];if(void 0!==n)return n.exports;var r=e[s]={exports:{}};return t[s](r,r.exports,o),r.exports}o.m=t,function(){var t=[];o.O=function(e,s,n,r){if(!s){var i=1/0;for(c=0;c<t.length;c++){s=t[c][0],n=t[c][1],r=t[c][2];for(var l=!0,u=0;u<s.length;u++)(!1&r||i>=r)&&Object.keys(o.O).every((function(t){return o.O[t](s[u])}))?s.splice(u--,1):(l=!1,r<i&&(i=r));if(l){t.splice(c--,1);var a=n();void 0!==a&&(e=a)}}return e}r=r||0;for(var c=t.length;c>0&&t[c-1][2]>r;c--)t[c]=t[c-1];t[c]=[s,n,r]}}(),function(){o.d=function(t,e){for(var s in e)o.o(e,s)&&!o.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){o.p="/elevator-emulator/"}(),function(){var t={143:0};o.O.j=function(e){return 0===t[e]};var e=function(e,s){var n,r,i=s[0],l=s[1],u=s[2],a=0;if(i.some((function(e){return 0!==t[e]}))){for(n in l)o.o(l,n)&&(o.m[n]=l[n]);if(u)var c=u(o)}for(e&&e(s);a<i.length;a++)r=i[a],o.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return o.O(c)},s=self["webpackChunktestovoe"]=self["webpackChunktestovoe"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=o.O(void 0,[998],(function(){return o(9021)}));s=o.O(s)})();
//# sourceMappingURL=app.e8297d82.js.map